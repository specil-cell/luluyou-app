{"uid":"30960f191a52e0a9","name":"test_handle_modal_02","fullName":"tests.test_login.TestShouYe_1#test_handle_modal_02","historyId":"36295b0648988bd8e9c0d491199a3e21","time":{"start":1692777163330,"stop":1692777175697,"duration":12367},"status":"broken","statusMessage":"minium.framework.exception.MiniCommandError: XPath parse error","statusTrace":"self = <tests.test_login.TestShouYe_1 testMethod=test_handle_modal_02>\n\n    def test_handle_modal_02(self):\n        callback = Callback()  # 监听回调, 阻塞当前主线程\n    \n        # 监听showModal回调, 确认由弹窗弹出\n        self.app.hook_wx_method(\"showModal\", callback=callback.callback)\n        self.page.get_element('text=\"安徽省-安庆市!\"').tap()  # 触发弹窗\n        time.sleep(2)\n        self.native.handle_modal(\"确定\")  # 点击弹窗的\"确定\"按钮\n    \n        # 搜索\n        time.sleep(3)\n        elements = self.page.get_elements(\n            '/page/view/biz-index-head/view/navigator')\n        for element in elements:\n            element.click()\n        time.sleep(3)\n        #     # 选择景点进行搜索\n        #     time.sleep(3)\n        #     elements = self.page.get_elements(\n        #         '/page/view/view[1]/picker/view')\n        #     for element in elements:\n        #         element.click()\n        #\n        # def test_handle_modal_03(self):\n        #     callback = Callback()  # 监听回调, 阻塞当前主线程\n        #\n        #     # 监听showModal回调, 确认由弹窗弹出\n        #     self.app.hook_wx_method(\"showModal\", callback=callback.callback)\n        #\n        #     self.page.get_element('text=\"景点\"').tap()  # 触发弹窗\n        #     pyautogui.scroll(2)\n        #     time.sleep(2)\n        #     self.native.handle_modal(\"确定\")  # 点击弹窗的\"确定\"按钮\n        #\n        #     time.sleep(3)\n        #     elements = self.page.get_elements(\n        #         '/page/view/biz-index-head/view/navigator')\n        #     for element in elements:\n        #         element.send_keys('武侯祠')\n        #     # 返回首页\n        # 武侯祠(历史记录)\n        elements = self.page.get_elements(\n            '/page/view/view[2]/view/view[2]/view')\n        for element in elements:\n            element.click()\n        # 武侯祠(确定选择)\n        elements = self.page.get_elements(\n            '/page/view/view[2]/list/view/view/navigator')\n        for element in elements:\n            element.click()\n        # 确认预约\n>       elements = self.page.get_elements(\n            '/page/view/view[5]/view/button/text()\"立即预约\"')\n\ntests\\test_login.py:116: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\app.py:214: in wrapper\n    return func(*args, **kwargs)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\minium_log.py:172: in wrapper\n    result = func(*args, **kwargs)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\page.py:373: in get_elements\n    return self.get_elements_by_xpath(\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\minium_log.py:172: in wrapper\n    result = func(*args, **kwargs)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\page.py:441: in get_elements_by_xpath\n    return search_elements()\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\utils\\utils.py:56: in wrapper\n    r = func(*args, **kwargs)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\page.py:439: in search_elements\n    return self._get_elements_by_xpath(xpath, index=index)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\utils\\utils.py:82: in wrapper\n    ret = func(*args, **kwargs)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\page.py:658: in _get_elements_by_xpath\n    ret = self._send(\"Page.getElementsByXpath\", {\"selector\": xpath})\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\page.py:488: in _send\n    self.connection.send(method, params)\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\connection.py:447: in send\n    return self._receive_response(cmd)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <minium.miniprogram.base_driver.connection.Connection object at 0x0000023CDF590EE0>\ncmd = <minium.miniprogram.base_driver.connection.Command object at 0x0000023CDF5E2A40>\n\n    def _receive_response(self, cmd: Command):\n        # 等待接收到message的通知\n        while cmd.max_timeout > 0:\n            self._wait(cmd)\n    \n            if (\n                cmd.id in self._sync_wait_map\n                and self._sync_wait_map[cmd.id] is not None\n            ):  # 获取到了数据\n                response = self._sync_wait_map.pop(cmd.id)\n                if isinstance(response, MiniAppError):\n>                   raise response\nE                   minium.framework.exception.MiniCommandError: XPath parse error\n\nD:\\software\\python-3.10.10\\lib\\site-packages\\minium\\miniprogram\\base_driver\\connection.py:473: MiniCommandError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_unittest_setUpClass_fixture_TestShouYe_1","time":{"start":1692777146106,"stop":1692777148114,"duration":2008},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false}],"afterStages":[{"name":"_unittest_setUpClass_fixture_TestShouYe_1::0","time":{"start":1692777180702,"stop":1692777180702,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"粮油副食"},{"name":"suite","value":"首页"},{"name":"parentSuite","value":"tests"},{"name":"subSuite","value":"TestShouYe_1"},{"name":"host","value":"LAPTOP-7PGH1LS0"},{"name":"thread","value":"21120-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"30960f191a52e0a9.json","parameterValues":[]}